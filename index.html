<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PERFORMANCE BAN-TAN - Dashboard Integrated</title>

<!-- LIBRARIES -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<!-- GLOBAL CSS -->
<link rel="stylesheet" href="css/global.css">
<link rel="stylesheet" href="css/navbar.css">
<link rel="stylesheet" href="css/home.css">
<link rel="stylesheet" href="css/cards.css">
<link rel="stylesheet" href="css/tables.css">
<link rel="stylesheet" href="css/summary.css">
<link rel="stylesheet" href="css/animations.css">
<link rel="stylesheet" href="css/overrides.css">

<!-- MODULE CSS (FIX PATH) -->
<link rel="stylesheet" href="css/modules/alert-sqm-hsi.css">
<link rel="stylesheet" href="css/modules/asgar-hsi.css">
<link rel="stylesheet" href="css/modules/monitoring-b2b.css">
<link rel="stylesheet" href="css/modules/monitoring-b2c.css">
<link rel="stylesheet" href="css/modules/ttr-hsi.css">

</head>

<body>

<nav class="navbar navbar-expand-lg navbar-dark">
<div class="container-fluid">

<a class="navbar-brand" href="#" onclick="location.reload()">
  <img src="assets/home/performance-team.png" height="40" class="me-2">
  PERFORMANCE BAN-TAN
</a>

<button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarNav">
<span class="navbar-toggler-icon"></span>
</button>

<div class="collapse navbar-collapse" id="navbarNav">
<ul class="navbar-nav">

        <!-- ================= B2C ================= -->
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">
            Huddle Performance Khusus B2C
          </a>

          <ul class="dropdown-menu">
            <li><a class="dropdown-item menu-link" data-menu="dashboard-b2c">Dashboard B2C 24KPI District BANTEN</a></li>
            <li><a class="dropdown-item menu-link" data-menu="monitoring-b2c">Monitoring Tiket B2C HI</a></li>

            <li><hr class="dropdown-divider"></li>

            <li class="dropdown dropend">
              <a class="dropdown-item dropdown-toggle" href="#" data-bs-toggle="dropdown" data-bs-auto-close="outside">
                Dashboard B2C District BANTEN
              </a>

              <ul class="dropdown-menu">
                <li><a class="dropdown-item menu-link" data-menu="xxx">Performance Q B2C All</a></li>
                <li><a class="dropdown-item menu-link" data-menu="xxx">Performance Assurance Guarantee B2C</a></li>
                <li><a class="dropdown-item menu-link" data-menu="xxx">Performance TTR B2C</a></li>
                <li><a class="dropdown-item menu-link" data-menu="xxx">Performance Underspec B2C</a></li>
                <li><a class="dropdown-item menu-link" data-menu="xxx">Performance SCC B2C</a></li>
                <li><a class="dropdown-item menu-link" data-menu="xxx">Performance VALINS B2C</a></li>
                <li><a class="dropdown-item menu-link" data-menu="xxx">Performance Infracare & Dismantling</a></li>
                <li><a class="dropdown-item menu-link" data-menu="xxx">Performance Tangible ODP & ODC</a></li>
                <li><a class="dropdown-item menu-link" data-menu="xxx">Performance Alert & SQM B2C</a></li>
              </ul>
            </li>
          </ul>
        </li>

        <!-- ================= B2B ================= -->
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">
            Huddle Performance Khusus B2B
          </a>

          <ul class="dropdown-menu">
            <li><a class="dropdown-item menu-link" data-menu="dashboard-b2b">Dashboard B2B 48KPI District BANTEN</a></li>
            <li><a class="dropdown-item menu-link" data-menu="monitoring-b2b">Monitoring Tiket B2B HI</a></li>

            <li><hr class="dropdown-divider"></li>

            <li class="dropdown dropend">
              <a class="dropdown-item dropdown-toggle" href="#" data-bs-toggle="dropdown" data-bs-auto-close="outside">
                Dashboard B2B District BANTEN
              </a>

              <ul class="dropdown-menu">
                <li><a class="dropdown-item menu-link" data-menu="District-Banten">Performance Q HSI</a></li>
                <li><a class="dropdown-item menu-link" data-menu="Asgar-HSI">Performance Assurance Guarantee HSI</a></li>
                <li><a class="dropdown-item menu-link" data-menu="TTR-HSI">Performance TTR HSI & Datin</a></li>
                <li><a class="dropdown-item menu-link" data-menu="xxx">Performance Unspec Segmen Akses & Wifi</a></li>
                <li><a class="dropdown-item menu-link" data-menu="xxx">Performance %Closed SQM HSI & DATIN</a></li>
                <li><a class="dropdown-item menu-link" data-menu="ALERT-HSI">Performance Alert HSI & SQM HSI</a></li>
              </ul>
            </li>
          </ul>
        </li>

      </ul>
</div>
</div>
</nav>

<div class="home-fullscreen" id="home-fullscreen">
  <div id="content-area"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
const B2B_API_URL =
'https://script.google.com/macros/s/AKfycby8iFZkMY53F4pYQFuH00b6Av7NAwp5Rtrk3b1GfNd6hwJelmlSjcUGeZjXlnz_Zmr2/exec';

const menuMap = {
  "District-Banten": { html: "partials/district-banten.html", js: "js/district-banten.js", init: "initDistrictBanten" },
  "Asgar-HSI": { html: "partials/asgar-hsi.html", js: "js/asgar-hsi.js", init: "initAsgarHSI" },
  "TTR-HSI": { html: "partials/ttr-hsi.html", js: "js/ttr-hsi.js", init: "initTTRHSI" },
  "ALERT-HSI": { html: "partials/alert-sqm-hsi.html", js: "js/alert-sqm-hsi.js", init: "initAlertHSI" },
  "dashboard-b2b": { html: "partials/dashboard-b2b.html", js: "js/dashboard-b2b.js", init: "initDashboardB2B" },
  "monitoring-b2b": { html: "partials/monitoring-b2b.html", js: "js/monitoring-b2b.js", init: "initMonitoringB2B" },
  "dashbord-b2c": { html: "partials/dashboard-b2c-24kpi.html", js: "js/dashboard-b2c-24kpi.js", init: "initDashboardB2C24KPI" },
  "monitoring-b2c": { html: "partials/monitoring-b2c.html", js: "js/monitoring-b2c.js", init: "initMonitoringB2C" }
};

async function loadPage(menu) {
  const content = document.getElementById("content-area");

  content.innerHTML = `
    <div class="d-flex flex-column align-items-center justify-content-center">
      <div class="spinner-border mb-3"></div>
      <div>Loading...</div>
    </div>
  `;

  if (!menuMap[menu]) {
    showUnderConstruction();
    return;
  }

  const cfg = menuMap[menu];

  const res = await fetch(cfg.html);
  content.innerHTML = await res.text();

  const s = document.createElement("script");
  s.src = cfg.js + "?v=" + Date.now();
  s.onload = () => window[cfg.init](B2B_API_URL);
  document.body.appendChild(s);
}

function showUnderConstruction() {
  document.getElementById("content-area").innerHTML = `
    <div class="text-center">
      <img src="assets/home/under-construction.png" class="img-fluid">
    </div>
  `;
}

document.querySelectorAll(".menu-link").forEach(el => {
  el.addEventListener("click", e => {
    e.preventDefault();
    loadPage(el.dataset.menu);
  });
});

document.querySelectorAll(".dropdown-menu .dropdown-toggle").forEach(el => {
  el.addEventListener("click", function (e) {
    e.preventDefault();
    e.stopPropagation();
    this.nextElementSibling.classList.toggle("show");
  });
});
</script>

</body>
</html>

